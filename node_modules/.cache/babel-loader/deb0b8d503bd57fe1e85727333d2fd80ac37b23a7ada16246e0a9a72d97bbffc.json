{"ast":null,"code":"var _jsxFileName = \"/Users/an-yohan/Downloads/spam4cut-main/spam/src/screen/DownloadButton.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport html2canvas from \"html2canvas\";\nimport \"./DownloadButton.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DownloadButton = () => {\n  _s();\n  const [isLoading, setIsLoading] = useState(false);\n  const captureImage = action => {\n    setIsLoading(true);\n    const frame = document.querySelector(\".photo-frame-container\");\n    if (!frame) {\n      alert(\"프레임을 찾을 수 없습니다.\");\n      setIsLoading(false);\n      return;\n    }\n    const images = frame.querySelectorAll(\"img\");\n    const imagePromises = Array.from(images).map(img => {\n      if (img.complete) return Promise.resolve();\n      return new Promise(resolve => {\n        img.onload = resolve;\n        img.onerror = resolve;\n      });\n    });\n    Promise.all(imagePromises).then(() => {\n      html2canvas(frame, {\n        scale: 2,\n        useCORS: true,\n        backgroundColor: null,\n        width: frame.offsetWidth,\n        height: frame.offsetHeight,\n        scrollX: -window.scrollX,\n        scrollY: -window.scrollY\n      }).then(canvas => {\n        if (action === \"print\") {\n          const imgData = canvas.toDataURL(\"image/png\");\n          const printContent = `\n            <html>\n              <head>\n                <title>Print</title>\n                <style>\n                  @page {\n                    size: 100mm 148mm; /* Hagaki size */\n                    margin: 0;\n                  }\n                  body {\n                    margin: 0;\n                    padding: 0;\n                  }\n                  img {\n                    width: 100mm;\n                    height: 148mm;\n                    object-fit: contain;\n                  }\n                </style>\n              </head>\n              <body>\n                <img src=\"${imgData}\" alt=\"Print Image\">\n                <script>\n                  window.onload = function() {\n                    setTimeout(function() {\n                      window.print();\n                      window.close();\n                    }, 500);\n                  };\n                </script>\n              </body>\n            </html>\n          `;\n          const printWindow = window.open(\"\", \"_blank\");\n          if (printWindow) {\n            printWindow.document.write(printContent);\n            printWindow.document.close();\n          } else {\n            alert(\"팝업이 차단되었습니다. 팝업 차단을 해제하고 다시 시도해주세요.\");\n          }\n        } else if (action === \"download\") {\n          const link = document.createElement(\"a\");\n          link.href = canvas.toDataURL(\"image/png\");\n          link.download = \"insaengnecut.png\";\n          link.click();\n        }\n        setIsLoading(false);\n      }).catch(err => {\n        console.error(\"캡처 중 오류 발생:\", err);\n        alert(\"이미지 캡처 중 오류가 발생했습니다.\");\n        setIsLoading(false);\n      });\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"download-box\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"print-button\",\n      onClick: () => captureImage(\"print\"),\n      disabled: isLoading,\n      children: isLoading ? \"처리 중...\" : \"출력\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"download-button\",\n      onClick: () => captureImage(\"download\"),\n      disabled: isLoading,\n      children: isLoading ? \"처리 중...\" : \"다운로드\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 5\n  }, this);\n};\n_s(DownloadButton, \"EmvgwIb3cHpoFpeP+WmEDbjx4y4=\");\n_c = DownloadButton;\nexport default DownloadButton;\nvar _c;\n$RefreshReg$(_c, \"DownloadButton\");","map":{"version":3,"names":["React","useState","html2canvas","jsxDEV","_jsxDEV","DownloadButton","_s","isLoading","setIsLoading","captureImage","action","frame","document","querySelector","alert","images","querySelectorAll","imagePromises","Array","from","map","img","complete","Promise","resolve","onload","onerror","all","then","scale","useCORS","backgroundColor","width","offsetWidth","height","offsetHeight","scrollX","window","scrollY","canvas","imgData","toDataURL","printContent","printWindow","open","write","close","link","createElement","href","download","click","catch","err","console","error","className","children","onClick","disabled","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/an-yohan/Downloads/spam4cut-main/spam/src/screen/DownloadButton.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport html2canvas from \"html2canvas\";\nimport \"./DownloadButton.css\";\n\nconst DownloadButton = () => {\n  const [isLoading, setIsLoading] = useState(false);\n\n  const captureImage = (action) => {\n    setIsLoading(true);\n    const frame = document.querySelector(\".photo-frame-container\");\n\n    if (!frame) {\n      alert(\"프레임을 찾을 수 없습니다.\");\n      setIsLoading(false);\n      return;\n    }\n\n    const images = frame.querySelectorAll(\"img\");\n    const imagePromises = Array.from(images).map((img) => {\n      if (img.complete) return Promise.resolve();\n      return new Promise((resolve) => {\n        img.onload = resolve;\n        img.onerror = resolve;\n      });\n    });\n\n    Promise.all(imagePromises).then(() => {\n      html2canvas(frame, {\n        scale: 2,\n        useCORS: true,\n        backgroundColor: null,\n        width: frame.offsetWidth,\n        height: frame.offsetHeight,\n        scrollX: -window.scrollX,\n        scrollY: -window.scrollY,\n      })\n        .then((canvas) => {\n          if (action === \"print\") {\n            const imgData = canvas.toDataURL(\"image/png\");\n            const printContent = `\n            <html>\n              <head>\n                <title>Print</title>\n                <style>\n                  @page {\n                    size: 100mm 148mm; /* Hagaki size */\n                    margin: 0;\n                  }\n                  body {\n                    margin: 0;\n                    padding: 0;\n                  }\n                  img {\n                    width: 100mm;\n                    height: 148mm;\n                    object-fit: contain;\n                  }\n                </style>\n              </head>\n              <body>\n                <img src=\"${imgData}\" alt=\"Print Image\">\n                <script>\n                  window.onload = function() {\n                    setTimeout(function() {\n                      window.print();\n                      window.close();\n                    }, 500);\n                  };\n                </script>\n              </body>\n            </html>\n          `;\n            const printWindow = window.open(\"\", \"_blank\");\n            if (printWindow) {\n              printWindow.document.write(printContent);\n              printWindow.document.close();\n            } else {\n              alert(\n                \"팝업이 차단되었습니다. 팝업 차단을 해제하고 다시 시도해주세요.\"\n              );\n            }\n          } else if (action === \"download\") {\n            const link = document.createElement(\"a\");\n            link.href = canvas.toDataURL(\"image/png\");\n            link.download = \"insaengnecut.png\";\n            link.click();\n          }\n          setIsLoading(false);\n        })\n        .catch((err) => {\n          console.error(\"캡처 중 오류 발생:\", err);\n          alert(\"이미지 캡처 중 오류가 발생했습니다.\");\n          setIsLoading(false);\n        });\n    });\n  };\n\n  return (\n    <div className=\"download-box\">\n      <button\n        className=\"print-button\"\n        onClick={() => captureImage(\"print\")}\n        disabled={isLoading}\n      >\n        {isLoading ? \"처리 중...\" : \"출력\"}\n      </button>\n      <button\n        className=\"download-button\"\n        onClick={() => captureImage(\"download\")}\n        disabled={isLoading}\n      >\n        {isLoading ? \"처리 중...\" : \"다운로드\"}\n      </button>\n    </div>\n  );\n};\n\nexport default DownloadButton;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}